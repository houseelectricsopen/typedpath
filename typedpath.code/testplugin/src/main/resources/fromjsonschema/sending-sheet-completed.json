{
  "$schema":"http://json-schema.org/draft-04/schema#",
  "type":"object",
  "required": [
    "hearing",
    "crownCourtHearing"
  ],
  "properties":{
    "crownCourtHearing":{
      "required":[
        "ccHearingDate",
        "courtCentreName",
        "courtCentreId"
      ],
      "type":"object",
      "properties":{
        "ccHearingDate":{
          "$ref":"#/definitions/datePattern"
        },
        "courtCentreName":{
          "type":"string"
        },
        "courtCentreId":{
          "$ref":"#/definitions/uuidPattern"
        }
      }
    },
    "hearing":{
      "required":[
        "courtCentreName",
        "courtCentreId",
        "type",
        "sendingCommittalDate",
        "caseId",
        "caseUrn",
        "defendants"
      ],
      "type":"object",
      "properties":{
        "courtCentreName":{
          "type":"string"
        },
        "courtCentreId":{
          "type":"string"
        },
        "type":{
          "type":"string"
        },
        "sendingCommittalDate":{
          "$ref":"#/definitions/datePattern"
        },
        "caseId":{
          "$ref":"#/definitions/uuidPattern"
        },
        "caseUrn":{
          "type":"string"
        },
        "defendants":{
          "items":{
            "required":[
              "id",
              "personId",
              "firstName",
              "lastName",
              "nationality",
              "gender",
              "address",
              "dateOfBirth",
              "interpreter",
              "offences"
            ],
            "properties":{
              "id":{
                "$ref":"#/definitions/uuidPattern"
              },
              "personId":{
                "$ref":"#/definitions/uuidPattern"
              },
              "firstName":{
                "type":"string"
              },
              "lastName":{
                "type":"string"
              },
              "nationality":{
                "type":"string"
              },
              "gender":{
                "enum":[
                  "Male",
                  "Female",
                  "NotSpecified"
                ]
              },
              "address":{
                "required":[
                  "address1"
                ],
                "properties":{
                  "address1":{
                    "type":"string"
                  },
                  "address2":{
                    "type":"string"
                  },
                  "address3":{
                    "type":"string"
                  },
                  "address4":{
                    "type":"string"
                  },
                  "postcode":{
                    "type":"string"
                  }
                },
                "type":"object"
              },
              "dateOfBirth":{
                "$ref":"#/definitions/datePattern"
              },
              "bailStatus":{
                "type":"string"
              },
              "custodyTimeLimitDate":{
                "$ref":"#/definitions/datePattern"
              },
              "defenceOrganisation":{
                "type":"string"
              },
              "interpreter":{
                "required":[
                  "needed"
                ],
                "properties":{
                  "needed":{
                    "type":"boolean"
                  },
                  "language":{
                    "type":"string"
                  }
                },
                "type":"object"
              },
              "offences":{
                "items":{
                  "required":[
                    "id",
                    "offenceCode",
                    "section",
                    "wording",
                    "startDate"
                  ],
                  "properties":{
                    "id":{
                      "$ref":"#/definitions/uuidPattern"
                    },
                    "offenceCode":{
                      "type":"string"
                    },
                    "convictionDate": {
                      "$ref":"#/definitions/datePattern"
                    },
                    "plea": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "$ref":"#/definitions/uuidPattern"
                        },
                        "value": {
                          "type": "string",
                          "enum": ["GUILTY"],
                          "$className": "PleaValue"
                        },
                        "pleaDate": {
                          "$ref":"#/definitions/datePattern"
                        }
                      },
                      "required": [
                        "id",
                        "value",
                        "pleaDate"
                      ]
                    },
                    "indicatedPlea": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "$ref":"#/definitions/uuidPattern"
                        },
                        "value": {
                          "type": "string",
                          "enum": ["NO_INDICATION", "INDICATED_GUILTY", "INDICATED_NOT_GUILTY"],
                          "$className": "IndicatedPleaValue"
                        },
                        "allocationDecision": {
                          "type": "string",
                          "enum": [
                            "ELECT_TRIAL",
                            "COURT_DECLINED",
                            "INDICTABLE_LINKED"
                          ]
                        }
                      },
                      "required": [
                        "id",
                        "value"
                      ]
                    },
                    "section":{
                      "type":"string"
                    },
                    "wording":{
                      "type":"string"
                    },
                    "reason":{
                      "type":"string"
                    },
                    "description":{
                      "type":"string"
                    },
                    "category":{
                      "type":"string"
                    },
                    "startDate":{
                      "$ref":"#/definitions/datePattern"
                    },
                    "endDate":{
                      "$ref":"#/definitions/datePattern"
                    }
                  },
                  "type":"object"
                },
                "type":"array"
              }
            },
            "type":"object"
          },
          "type":"array"
        }
      }
    }
  },
  "definitions":{
    "uuidPattern":{
      "type":"string",
      "pattern":"^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$"
    },
    "datePattern":{
      "type":"string",
      "pattern":"^((([\\+-]?\\d{4}(?!\\d{2}\\b))\\-(0[13578]|1[02])\\-(0[1-9]|[12]\\d|3[01]))|(([\\+-]?\\d{4}(?!\\d{2}\\b))\\-(0[13456789]|1[012])\\-(0[1-9]|[12]\\d|30))|(([\\+-]?\\d{4}(?!\\d{2}\\b))\\-02\\-(0[1-9]|1\\d|2[0-8]))|(((1[6-9]|[2-9]\\d)(0[48]|[2468][048]|[13579][26])|((16|[2468][048]|[3579][26])00))\\-02\\-29))$"
    }
  }
}
